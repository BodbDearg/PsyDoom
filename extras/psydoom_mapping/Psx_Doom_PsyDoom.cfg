//--------------------------------------------------------------------------------------------------
// PsyDoom extensions for the 'Doom: PsxDoom' map format.
//
// That map format is defined by "GZDoom Builder Custom By GEC V3" and this configuration must be
// used with that version of GZDoom Builder. To find the latest download links for the GEC GZDoom
// Builder see the "[GEC] Master Edition PSX Doom for the PlayStation" Doomworld thread:
//
//    https://www.doomworld.com/forum/topic/101161-gec-master-edition-psx-doom-for-the-playstation-1102019-beta-3-release-now-are-you-ready-for-more-action/
//
// This configuration contains all the standard PlayStation Doom definitions, in addition to a few
// extra features added by PsyDoom.
//--------------------------------------------------------------------------------------------------

include("Psx_Doom.cfg")

game = "Doom: PsxDoom (PsyDoom extensions)";

linedefflags
{
    //----------------------------------------------------------------------------------------------
    // Flags a line as 'see through' in parts for occlusion culling (on the basis that it has
    // see-through upper or lower voids) and prohibits sky walls from being rendered for the line.
    //----------------------------------------------------------------------------------------------
    16384 = "Upper/Lower Void (PsyDoom Only)";

    //----------------------------------------------------------------------------------------------
    // Hints that a 'sky wall' should be added for 2 sided lines with a sky ceiling or floors.
    // Note: if 'Upper/Lower Void' is specified then this is ignored.
    //----------------------------------------------------------------------------------------------
    32768 = "Add Sky Wall Hint (PsyDoom Only)";
}

linedefflagstranslation
{
    //----------------------------------------------------------------------------------------------
    // Bugfix to GEC GZDoom Builder: fix these flags always being set upon importing from a prefab.
    // Originally they had a '!' symbol in front of them...
    //----------------------------------------------------------------------------------------------
    512 = "render mid-texture";
    1024 = "mid-texture translucent (0.5)";
    2048 = "block projectiles";
    4096 = "clip mid-texture (finaldoom only)";
    8192 = "link scroll (findside only)";

    //----------------------------------------------------------------------------------------------
    // New PsyDoom stuff
    //----------------------------------------------------------------------------------------------
    16384 = "Upper/Lower Void (PsyDoom Only)";
    32768 = "Add Sky Wall Hint (PsyDoom Only)";
}

sectorflags
{
    //----------------------------------------------------------------------------------------------
    // Render the sector at the lowest floor height surrounding it, creating an 
    // 'invisible platform' effect...
    //----------------------------------------------------------------------------------------------
    2 = "Ghost Platform";
}

//--------------------------------------------------------------------------------------------------
// Re-adding missing things from PC Doom II
//--------------------------------------------------------------------------------------------------
thingtypes
{
    monsters
    {
        91
        {
            title = "Archvile";
            sprite = "VILEA2D8";
        }

        84
        {
            title = "Wolfenstein SS";
            sprite = "SSWVA2";
        }
        
        72
        {
            title = "Commander Keen";
            width = 16;
            sprite = "KEENA0";
            height = 72;
            hangs = 1;
        }
        
        88
        {
            title = "Icon of Sin";
            width = 16;
            sprite = "BBRNA0";
            height = 16;
        }

        89
        {
            title = "Monsters Spawner";
            sprite = "BOSFB0";
            locksprite = true;
            height = 32;
        }

        87
        {
            title = "Monsters Target";
            sprite = "internal:Target";
            height = 32;
        }
    }
}

//--------------------------------------------------------------------------------------------------
// Re-adding missing line actions from PC Doom II
//--------------------------------------------------------------------------------------------------
linedeftypes
{
    floor
    {
        128
        {
            title = "Floor Raise to Next Higher Floor (PsyDoom Only)";
            prefix = "WR";
        }
        
        129
        {
            title = "Floor Raise to Next Higher Floor (fast) (PsyDoom Only)";
            prefix = "WR";
        }
        
        130
        {
            title = "Floor Raise to Next Higher Floor (fast) (PsyDoom Only)";
            prefix = "W1";
        }
        
        131
        {
            title = "Floor Raise to Next Higher Floor (fast) (PsyDoom Only)";
            prefix = "S1";
        }
        
        132
        {
            title = "Floor Raise to Next Higher Floor (fast) (PsyDoom Only)";
            prefix = "SR";
        }
        
        140
        {
            title = "Floor Raise by 512 (PsyDoom Only)";
            prefix = "S1";
        }
    }
}
